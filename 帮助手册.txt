## API步骤配置中断言验证的提取表达式支持
在API步骤配置的断言验证中，系统支持多种提取表达式方式来从HTTP响应中提取数据进行验证：
### 支持的数据源类型
1. 1.
   响应体 (body/json_body)
   - 用于从JSON格式的响应体中提取数据
   - 支持JSONPath表达式
2. 2.
   文本响应体 (text_body)
   - 用于从纯文本响应中提取数据
   - 支持正则表达式
3. 3.
   响应头 (headers)
   - 用于从HTTP响应头中提取特定头部信息
   - 直接使用头部名称作为表达式
4. 4.
   状态码 (status_code)
   - 直接获取HTTP状态码
   - 无需表达式
5. 5.
   Cookie
   - 从Set-Cookie头中提取特定Cookie值
   - 使用Cookie名称作为表达式
6. 6.
   响应时间 (time)
   - 获取请求响应时间
7. 7.
   响应大小 (size)
   
   - 获取响应内容大小
### 提取表达式的具体方式 1. JSONPath表达式（用于JSON响应体）
语法格式 ：以 $. 开头的路径表达式

配置示例 ：

- $.data.user.name - 提取嵌套对象中的用户名
- $.items[0].id - 提取数组第一个元素的ID
- $.result.list[*].status - 提取数组中所有元素的状态
- $.response.code - 提取响应码字段
支持的JSONPath功能 ：

- 对象属性访问： $.property
- 数组索引访问： $.array[0]
- 嵌套路径： $.level1.level2.property
- 数组元素： $.items[0].field 2. 正则表达式（用于文本响应体）
语法格式 ：使用标准正则表达式语法

配置示例 ：

- "token":\s*"([^"]+)" - 提取JSON字符串中的token值
- <title>(.+?)</title> - 提取HTML标题
- ID:\s*(\d+) - 提取ID数字
- Error:\s*(.+) - 提取错误信息
注意事项 ：

- 如果正则表达式包含分组 () ，将返回第一个分组的内容
- 如果没有分组，返回整个匹配的内容 3. 头部名称（用于响应头）
语法格式 ：直接使用HTTP头部名称

配置示例 ：

- Content-Type - 获取内容类型
- Authorization - 获取授权头
- X-Request-ID - 获取自定义请求ID
- Location - 获取重定向位置 4. Cookie名称（用于Cookie提取）
语法格式 ：直接使用Cookie名称

配置示例 ：

- sessionId - 提取会话ID
- token - 提取认证令牌
- userId - 提取用户ID
### 前端配置界面
在 `ApiStepsManager.vue` 组件中，断言验证的配置界面包括：

1. 1.
   数据源选择 ：下拉框选择响应体、响应头、状态码、Cookie、响应时间、响应大小
2. 2.
   提取表达式输入 ：文本框输入对应的表达式（JSONPath、正则表达式或属性名）
3. 3.
   比较操作符 ：支持等于、不等于、包含、大于、小于、正则匹配、存在性检查等
4. 4.
   期望值 ：设置断言的期望结果
5. 5.
   告警配置 ：可选择在断言匹配或不匹配时触发告警
### 实际应用示例
示例1：验证API返回的用户状态

- 数据源： body
- 提取表达式： $.data.user.status
- 比较操作： equals
- 期望值： active
示例2：验证响应时间

- 数据源： time
- 提取表达式：（留空）
- 比较操作： less_than
- 期望值： 2000
示例3：验证错误信息

- 数据源： body
- 提取表达式： $.error.message
- 比较操作： contains
- 期望值： success
这套提取表达式系统为API监控提供了灵活而强大的数据验证能力，能够满足各种复杂的业务场景需求。